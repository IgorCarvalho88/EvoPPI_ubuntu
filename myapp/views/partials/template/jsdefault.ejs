 <!-- jQuery -->
    <script src="javascripts/jquery.js"></script>

    <!-- javascript -->
    <!--<script src="javascripts/javascript.js"></script>-->

    <!-- Bootstrap Core JavaScript -->
    <script src="javascripts/bootstrap.min.js"></script>
    <script src="javascripts/typeahead.jquery.min.js"></script>
    <script src="javascripts/bloodhound.min.js"></script>
    <script src="javascripts/typeahead.bundle.min.js"></script>
    <script src="javascripts/bootstrap3-typeahead.min.js"></script>


    <script>
      function parseData(data){

        var finalData = [];
        for (var i = 0; i < data.length; i++) { 
          for (var j = 0; j < data[i].length; j++) { 
            finalData.push(data[i][j]);
          }
        }

        //console.log(finalData);
        return finalData;

      }

	    function mySelect() {
	    	var x = document.getElementById("mySelect").value;
	    	var url = "/genes/" + x;
            var url2 = "/interactome/" + x;

	    	$.ajax({
    		type: "GET",
    		url: url,

    	   }).done(function(data){

            var genes = parseData(data);

            $('#query').typeahead({        
                   source : genes
            });

    	   });


            $.ajax({
                type: "GET",
                url: url2,

            }).done(function(data){
                var select = document.getElementById("interactome1");
                 $("#interactome1 option").remove();
                for (var i = 0; i < data.length; i++) { // from 1 to 10
                    var option = document.createElement("option");
                    var text = document.createTextNode(data[i]);
                    option.appendChild(text);
                    select.appendChild(option);
                }

                });

	    }




         function mySelect2() {
            var x = document.getElementById("mySelect2").value;
            var url2 = "/interactome/" + x;

            $.ajax({
                type: "GET",
                url: url2,

            }).done(function(data){
                var select = document.getElementById("interactome2");
                $("#interactome2 option").remove();
                for (var i = 0; i < data.length; i++) { // from 1 to 10
                    var option = document.createElement("option");
                    var text = document.createTextNode(data[i]);
                    option.appendChild(text);
                    select.appendChild(option);
                }

                });
        }

        function differentSpeciesMySelect2() {
            var x = document.getElementById("mySelect2").value;
            var url2 = "/interactome/" + x;
            var url3 = "/createDbTemp/" + x;

            $.ajax({
                type: "GET",
                url: url2,

            }).done(function(data){
                var select = document.getElementById("interactome2");
                $("#interactome2 option").remove();
                for (var i = 0; i < data.length; i++) { // from 1 to 10
                    var option = document.createElement("option");
                    var text = document.createTextNode(data[i]);
                    option.appendChild(text);
                    select.appendChild(option);
                }

                });


            $.ajax({
                type: "GET",
                url: url3,
                beforeSend: function() {
                    $("#pleaseWaitDialog").modal('show');
                },
            }).done(function(){
                //console.log("entro");
                $("#pleaseWaitDialog").modal('hide');
            });

        }



        $('#sameSpecies').on('submit', function(event){
            event.preventDefault();
            $.ajax('/interactome', {
                type: 'GET',
                data: $('#sameSpecies').serialize()
            
            }).done(function(data){
                var table = document.getElementById("tbody");
                $("#tbody tr").remove();
                for (var i = 0; i < data.length; i++) { // from 1 to 10
                    var row = document.createElement("tr");
                    var column1 = document.createElement("td");
                    var column2 = document.createElement("td");
                    var text1 = document.createTextNode(data[i][1]);
                    var text2 = document.createTextNode(data[i][2]);
                    column1.appendChild(text1);
                    column2.appendChild(text2);
                    row.appendChild(column1);
                    row.appendChild(column2);
                    table.appendChild(row);
                }
            });

        });

        $("#fasta").on('submit', function(event){
            var x = document.getElementById("mySelect").value;
            var x2 = document.getElementById("mySelect2").value;
            var url = "/differentSpecies/" + x + "/" + x2;
            event.preventDefault();
            $.ajax(url, {
                type: 'GET',
                data: $('#fasta').serialize(),
                beforeSend: function() {
                    $("#pleaseWaitDialog").modal('show');
                },
            
            }).done(function(data){
                //console.log(data);
                if(data == "Missing gene on interactome")
                {
                    $("#pleaseWaitDialog").modal('hide');
                    $("#getModal").modal('show');

                }
                else
                {
                $("#pleaseWaitDialog").modal('hide');
                var table = document.getElementById("tbody");
                $("#tbody tr").remove();
                for (var i = 0; i < data.length; i++) { // from 1 to 10
                    var row = document.createElement("tr");
                    var column1 = document.createElement("td");
                    var column2 = document.createElement("td");
                    var column3 = document.createElement("td");
                    var column4 = document.createElement("td");
                    var column5 = document.createElement("td");
                    var text1 = document.createTextNode(data[i][0]);
                    var text2 = document.createTextNode(data[i][1]);
                    var text3 = document.createTextNode(data[i][2]);
                    var text4 = document.createTextNode(data[i][3]);
                    var text5 = document.createTextNode(data[i][4]);
                    column1.appendChild(text1);
                    column2.appendChild(text2);
                    column3.appendChild(text3);
                    column4.appendChild(text4);
                    column5.appendChild(text5);
                    row.appendChild(column1);
                    row.appendChild(column2);
                    row.appendChild(column3);
                    row.appendChild(column4);
                    row.appendChild(column5);
                    table.appendChild(row);
                }
                }
            });

        });

        $('#getModal').on('hidden.bs.modal', function () {
            //console.log("entro");
            location.reload();
        });

        $("#export").click(function() {
            
            var finalData = [];
           // console.log("entro");
            $('table tbody tr').each(function() { // Finds all children <tr> elements
                var data = [];
                $(this).find("td").each(function(){ // Visits every single <td> element
                    data.push($(this).text());       // Push out the text within the <td>
                });
                finalData.push(data);    
             });

             $.ajax({
              type : "POST",
              url : '/download',
              data : JSON.stringify(finalData),
              contentType: 'application/json',
              //data : finalData,
              success: function(data) {
                    //console.log(data);
                    window.location = '/download2';
                  //window.location = '/path/to/download?arg=1';
              },
              error : function() {
              }
        });
    });

        // $("#level").click(function() {
        //     var finalData = [];
        //     console.log("entro");
        //     $('table tbody tr').each(function() { // Finds all children <tr> elements
        //         var data = [];
        //         $(this).find("td").each(function(){ // Visits every single <td> element
        //             data.push($(this).text());       // Push out the text within the <td>
        //         });
        //         finalData.push(data);    
        //      });
        //     var data = JSON.stringify({
        //         query2: $('#fasta').serialize(),
        //         table : finalData
        //     });

        //     console.log(data);

        //      $.ajax({
        //       type : "POST",
        //       //data: $('#fasta').serialize(),
        //       url : '/level',
        //       data : data,
        //       contentType: 'application/json',
        //       //data : finalData,
        //       success: function(done) {
        //             console.log(done);
        //            // window.location = '/download2';
        //           //window.location = '/path/to/download?arg=1';
        //       },
        //       error : function() {
        //       }
        //     });
        // });

            //console.log(finalData);


           /* $("#level").on('submit', function(event){
                console.log("entro");
            var x = document.getElementById("mySelect").value;
            var x2 = document.getElementById("mySelect2").value;
            var url = "/level/" + x + "/" + x2;
            event.preventDefault();
            $.ajax(url, {
                type: 'GET',
                data: $('#fasta').serialize(),
                beforeSend: function() {
                    $("#pleaseWaitDialog").modal('show');
                },
            
            }).done(function(data){
                //console.log(data);
                /*if(data == "Missing gene on interactome")
                {
                    $("#pleaseWaitDialog").modal('hide');
                    $("#getModal").modal('show');

                }
                else
                {
                $("#pleaseWaitDialog").modal('hide');
                var table = document.getElementById("tbody");
                $("#tbody tr").remove();
                for (var i = 0; i < data.length; i++) { // from 1 to 10
                    var row = document.createElement("tr");
                    var column1 = document.createElement("td");
                    var column2 = document.createElement("td");
                    var column3 = document.createElement("td");
                    var column4 = document.createElement("td");
                    var column5 = document.createElement("td");
                    var text1 = document.createTextNode(data[i][0]);
                    var text2 = document.createTextNode(data[i][1]);
                    var text3 = document.createTextNode(data[i][2]);
                    var text4 = document.createTextNode(data[i][3]);
                    var text5 = document.createTextNode(data[i][4]);
                    column1.appendChild(text1);
                    column2.appendChild(text2);
                    column3.appendChild(text3);
                    column4.appendChild(text4);
                    column5.appendChild(text5);
                    row.appendChild(column1);
                    row.appendChild(column2);
                    row.appendChild(column3);
                    row.appendChild(column4);
                    row.appendChild(column5);
                    table.appendChild(row);
                }
                }
            });
            console.log(data);

        });
    });*/

            $(document).ready(function() {
                $("#level").click(function() {
                    var x = document.getElementById("mySelect").value;
                    var x2 = document.getElementById("mySelect2").value;
                    var url = "/level/" + x + "/" + x2;
                    //event.preventDefault();
                    $.ajax(url, {
                        type: 'GET',
                        data: $('#fasta').serialize(),
                        beforeSend: function() {
                            $("#pleaseWaitDialog").modal('show');
                        },
            
                    }).done(function(data){
                        console.log(data);
                        $("#pleaseWaitDialog").modal('hide');
                        var table = document.getElementById("tbody");
                        for (var i = 0; i < data.length; i++) { // from 1 to 10
                            var row = document.createElement("tr");
                            var column1 = document.createElement("td");
                            var column2 = document.createElement("td");
                            var column3 = document.createElement("td");
                            var column4 = document.createElement("td");
                            var column5 = document.createElement("td");
                            var text1 = document.createTextNode(data[i][0]);
                            var text2 = document.createTextNode(data[i][1]);
                            var text3 = document.createTextNode(data[i][2]);
                            var text4 = document.createTextNode(data[i][3]);
                            var text5 = document.createTextNode(data[i][4]);
                            column1.appendChild(text1);
                            column2.appendChild(text2);
                            column3.appendChild(text3);
                            column4.appendChild(text4);
                            column5.appendChild(text5);
                            row.appendChild(column1);
                            row.appendChild(column2);
                            row.appendChild(column3);
                            row.appendChild(column4);
                            row.appendChild(column5);
                            table.appendChild(row);
                        }

                    });
       });
    });

            



        /*$("#mySelect2").change(function()){
            alert( "Handler for .change() called." );
        });*/
    	
    </script>

    